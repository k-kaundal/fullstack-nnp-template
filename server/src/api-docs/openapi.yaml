openapi: 3.0.0
paths:
  /:
    get:
      operationId: getHello
      parameters:
        - name: X-API-Version
          in: header
          required: false
          description: API version for header-based versioning
          schema:
            type: string
            enum:
              - 1
              - 2
            default: 1
      responses:
        200:
          description: API is running
      summary: Health check endpoint
      tags:
        - health
  /favicon.ico:
    get:
      operationId: getFavicon
      parameters:
        - name: X-API-Version
          in: header
          required: false
          description: API version for header-based versioning
          schema:
            type: string
            enum:
              - 1
              - 2
            default: 1
      responses:
        204:
          description: No favicon available
      summary: Favicon endpoint
      tags:
        - health
  /api/v1/admin/request-logs:
    get:
      operationId: getRequestLogs
      parameters:
        - name: page
          required: true
          in: query
          schema:
            type: string
        - name: limit
          required: true
          in: query
          schema:
            type: string
        - name: X-API-Version
          in: header
          required: false
          description: API version for header-based versioning
          schema:
            type: string
            enum:
              - 1
              - 2
            default: 1
      responses:
        401:
          description: Unauthorized - Invalid or missing JWT token.
          content:
            application/json:
              schema:
                example:
                  status: error
                  statusCode: 401
                  message: Unauthorized
                  timestamp: 2026-01-31T19:20:00.000Z
                  path: /admin/request-logs
      security:
        - bearer:
      summary: Get all request logs
      tags:
        - Request Logs
  /api/v1/admin/request-logs/user:
    get:
      operationId: getUserRequestLogs
      parameters:
        - name: userId
          required: true
          in: query
          schema:
            type: string
        - name: page
          required: true
          in: query
          schema:
            type: string
        - name: limit
          required: true
          in: query
          schema:
            type: string
        - name: X-API-Version
          in: header
          required: false
          description: API version for header-based versioning
          schema:
            type: string
            enum:
              - 1
              - 2
            default: 1
      responses:
        401:
          description: Unauthorized - Invalid or missing JWT token.
          content:
            application/json:
              schema:
                example:
                  status: error
                  statusCode: 401
                  message: Unauthorized
                  timestamp: 2026-01-31T19:20:00.000Z
                  path: /admin/request-logs/user
      security:
        - bearer:
      summary: Get request logs for specific user
      tags:
        - Request Logs
  /api/v1/admin/request-logs/statistics:
    get:
      operationId: getStatistics
      parameters:
        - name: X-API-Version
          in: header
          required: false
          description: API version for header-based versioning
          schema:
            type: string
            enum:
              - 1
              - 2
            default: 1
      responses:
        401:
          description: Unauthorized - Invalid or missing JWT token.
          content:
            application/json:
              schema:
                example:
                  status: error
                  statusCode: 401
                  message: Unauthorized
                  timestamp: 2026-01-31T19:20:00.000Z
                  path: /admin/request-logs/statistics
      security:
        - bearer:
      summary: Get request log statistics
      tags:
        - Request Logs
  /api/v1/admin/request-logs/cleanup/stats:
    get:
      operationId: getCleanupStats
      parameters:
        - name: X-API-Version
          in: header
          required: false
          description: API version for header-based versioning
          schema:
            type: string
            enum:
              - 1
              - 2
            default: 1
      responses:
        401:
          description: Unauthorized - Invalid or missing JWT token.
          content:
            application/json:
              schema:
                example:
                  status: error
                  statusCode: 401
                  message: Unauthorized
                  timestamp: 2026-01-31T19:20:00.000Z
                  path: /admin/request-logs/cleanup/stats
      security:
        - bearer:
      summary: Get cleanup statistics
      tags:
        - Request Logs
  /api/v1/admin/request-logs/cleanup/trigger:
    post:
      operationId: triggerCleanup
      parameters:
        - name: X-API-Version
          in: header
          required: false
          description: API version for header-based versioning
          schema:
            type: string
            enum:
              - 1
              - 2
            default: 1
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: #/components/schemas/TriggerCleanupDto
      responses:
        401:
          description: Unauthorized - Invalid or missing JWT token.
          content:
            application/json:
              schema:
                example:
                  status: error
                  statusCode: 401
                  message: Unauthorized
                  timestamp: 2026-01-31T19:20:00.000Z
                  path: /admin/request-logs/cleanup/trigger
        403:
          description: Forbidden - Insufficient permissions.
          content:
            application/json:
              schema:
                example:
                  status: error
                  statusCode: 403
                  message: Forbidden resource
                  timestamp: 2026-01-31T19:20:00.000Z
                  path: /admin/request-logs/cleanup/trigger
        500:
          description: Internal Server Error - Unexpected error occurred.
          content:
            application/json:
              schema:
                example:
                  status: error
                  statusCode: 500
                  message: Internal server error
                  timestamp: 2026-01-31T19:20:00.000Z
                  path: /admin/request-logs/cleanup/trigger
      security:
        - bearer:
      summary: Manually trigger log cleanup
      tags:
        - Request Logs
  /api/v1/auth/register:
    post:
      description: Creates a new user account and sends email verification link. Rate limited to 5 requests per minute.
      operationId: register
      parameters:
        - name: X-API-Version
          in: header
          required: false
          description: API version for header-based versioning
          schema:
            type: string
            enum:
              - 1
              - 2
            default: 1
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: #/components/schemas/RegisterDto
      responses:
        201:
          description: User registered successfully
          content:
            application/json:
              schema:
                example:
                  status: success
                  statusCode: 201
                  message: Registration successful. Please check your email to verify your account.
                  data:
                    user:
                      id: 123e4567-e89b-12d3-a456-426614174000
                      email: john.doe@example.com
                      firstName: John
                      lastName: Doe
                      isActive: true
                      isEmailVerified: false
                      createdAt: 2026-01-31T10:00:00.000Z
                      updatedAt: 2026-01-31T10:00:00.000Z
                    accessToken: eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9...
                    refreshToken: eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9...
                  meta:
                    user_id: 123e4567-e89b-12d3-a456-426614174000
                    created_at: 2026-01-31T10:00:00.000Z
                    email_verification_required: true
                  timestamp: 2026-01-31T10:00:00.000Z
                  path: /api/v1/auth/register
        400:
          description: Bad Request - Validation failed.
          content:
            application/json:
              schema:
                example:
                  status: error
                  statusCode: 400
                  message: Validation failed
                  errors:
                    - Field is required
                    - Invalid format
                  timestamp: 2026-01-31T19:20:00.000Z
                  path: /api/v1/auth/register
        409:
          description: Conflict - Resource already exists.
          content:
            application/json:
              schema:
                example:
                  status: error
                  statusCode: 409
                  message: User with this email already exists
                  timestamp: 2026-01-31T19:20:00.000Z
                  path: /api/v1/auth/register
        429:
          description: Too many requests
          content:
            application/json:
              schema:
                example:
                  status: error
                  statusCode: 429
                  message: ThrottlerException: Too Many Requests
                  timestamp: 2026-01-31T10:00:00.000Z
                  path: /api/v1/auth/register
      summary: Register a new user
      tags:
        - auth
  /api/v1/auth/login:
    post:
      description: Authenticate user with email and password. Rate limited to 10 requests per minute.
      operationId: login
      parameters:
        - name: X-API-Version
          in: header
          required: false
          description: API version for header-based versioning
          schema:
            type: string
            enum:
              - 1
              - 2
            default: 1
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: #/components/schemas/LoginDto
      responses:
        200:
          description: Login successful
          content:
            application/json:
              schema:
                example:
                  status: success
                  statusCode: 200
                  message: Login successful
                  data:
                    user:
                      id: 123e4567-e89b-12d3-a456-426614174000
                      email: john.doe@example.com
                      firstName: John
                      lastName: Doe
                      isActive: true
                      isEmailVerified: true
                      createdAt: 2026-01-31T10:00:00.000Z
                      updatedAt: 2026-01-31T10:00:00.000Z
                    accessToken: eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9...
                    refreshToken: eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9...
                  meta:
                    user_id: 123e4567-e89b-12d3-a456-426614174000
                    is_email_verified: true
                  timestamp: 2026-01-31T10:00:00.000Z
                  path: /api/v1/auth/login
        400:
          description: Bad Request - Validation failed.
          content:
            application/json:
              schema:
                example:
                  status: error
                  statusCode: 400
                  message: Validation failed
                  errors:
                    - Field is required
                    - Invalid format
                  timestamp: 2026-01-31T19:20:00.000Z
                  path: /api/v1/auth/login
        401:
          description: Unauthorized - Invalid or missing JWT token.
          content:
            application/json:
              schema:
                example:
                  status: error
                  statusCode: 401
                  message: Unauthorized
                  timestamp: 2026-01-31T19:20:00.000Z
                  path: /api/v1/auth/login
        429:
          description: Too many requests
          content:
            application/json:
              schema:
                example:
                  status: error
                  statusCode: 429
                  message: ThrottlerException: Too Many Requests
                  timestamp: 2026-01-31T10:00:00.000Z
                  path: /api/v1/auth/login
      summary: Login user
      tags:
        - auth
  /api/v1/auth/logout:
    post:
      description: Blacklists the current access token and revokes all refresh tokens
      operationId: logout
      parameters:
        - name: X-API-Version
          in: header
          required: false
          description: API version for header-based versioning
          schema:
            type: string
            enum:
              - 1
              - 2
            default: 1
      responses:
        200:
          description: Logout successful
          content:
            application/json:
              schema:
                example:
                  status: success
                  statusCode: 200
                  message: Logout successful
                  data: null
                  meta:
                    user_id: 123e4567-e89b-12d3-a456-426614174000
                    logged_out_at: 2026-01-31T10:00:00.000Z
                  timestamp: 2026-01-31T10:00:00.000Z
                  path: /api/v1/auth/logout
        401:
          description: Unauthorized - Invalid or missing JWT token.
          content:
            application/json:
              schema:
                example:
                  status: error
                  statusCode: 401
                  message: Unauthorized
                  timestamp: 2026-01-31T19:20:00.000Z
                  path: /api/v1/auth/logout
      security:
        - bearer:
      summary: Logout user
      tags:
        - auth
  /api/v1/auth/refresh:
    post:
      description: Get a new access token using a valid refresh token. Rate limited to 20 requests per minute.
      operationId: refreshToken
      parameters:
        - name: X-API-Version
          in: header
          required: false
          description: API version for header-based versioning
          schema:
            type: string
            enum:
              - 1
              - 2
            default: 1
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: #/components/schemas/RefreshTokenDto
      responses:
        200:
          description: Token refreshed successfully
          content:
            application/json:
              schema:
                example:
                  status: success
                  statusCode: 200
                  message: Token refreshed successfully
                  data:
                    accessToken: eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9...
                    refreshToken: eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9...
                  meta:
                    user_id: 123e4567-e89b-12d3-a456-426614174000
                    refreshed_at: 2026-01-31T10:00:00.000Z
                  timestamp: 2026-01-31T10:00:00.000Z
                  path: /api/v1/auth/refresh
        401:
          description: Invalid or expired refresh token
      summary: Refresh access token
      tags:
        - auth
  /api/v1/auth/forgot-password:
    post:
      description: Sends password reset link to user email. Rate limited to 3 requests per hour.
      operationId: forgotPassword
      parameters:
        - name: X-API-Version
          in: header
          required: false
          description: API version for header-based versioning
          schema:
            type: string
            enum:
              - 1
              - 2
            default: 1
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: #/components/schemas/ForgotPasswordDto
      responses:
        200:
          description: Password reset email sent
          content:
            application/json:
              schema:
                example:
                  status: success
                  statusCode: 200
                  message: If an account with that email exists, a password reset link has been sent.
                  data: null
                  meta:
                    email_sent_at: 2026-01-31T10:00:00.000Z
                  timestamp: 2026-01-31T10:00:00.000Z
                  path: /api/v1/auth/forgot-password
      summary: Request password reset
      tags:
        - auth
  /api/v1/auth/reset-password:
    post:
      description: Reset password using token from email. Rate limited to 5 requests per hour.
      operationId: resetPassword
      parameters:
        - name: X-API-Version
          in: header
          required: false
          description: API version for header-based versioning
          schema:
            type: string
            enum:
              - 1
              - 2
            default: 1
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: #/components/schemas/ResetPasswordDto
      responses:
        200:
          description: Password reset successful
          content:
            application/json:
              schema:
                example:
                  status: success
                  statusCode: 200
                  message: Password reset successful. Please login with your new password.
                  data: null
                  meta:
                    user_id: 123e4567-e89b-12d3-a456-426614174000
                    password_reset_at: 2026-01-31T10:00:00.000Z
                  timestamp: 2026-01-31T10:00:00.000Z
                  path: /api/v1/auth/reset-password
        400:
          description: Invalid or expired reset token
      summary: Reset password
      tags:
        - auth
  /api/v1/auth/verify-email:
    post:
      description: Verify user email using token from email. Rate limited to 5 requests per hour.
      operationId: verifyEmail
      parameters:
        - name: X-API-Version
          in: header
          required: false
          description: API version for header-based versioning
          schema:
            type: string
            enum:
              - 1
              - 2
            default: 1
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: #/components/schemas/VerifyEmailDto
      responses:
        200:
          description: Email verified successfully
          content:
            application/json:
              schema:
                example:
                  status: success
                  statusCode: 200
                  message: Email verified successfully
                  data: null
                  meta:
                    user_id: 123e4567-e89b-12d3-a456-426614174000
                    verified_at: 2026-01-31T10:00:00.000Z
                  timestamp: 2026-01-31T10:00:00.000Z
                  path: /api/v1/auth/verify-email
        400:
          description: Invalid or expired verification token
      summary: Verify email
      tags:
        - auth
  /api/v1/auth/resend-verification:
    post:
      description: Sends a new email verification link. Rate limited to 3 requests per hour.
      operationId: resendVerification
      parameters:
        - name: X-API-Version
          in: header
          required: false
          description: API version for header-based versioning
          schema:
            type: string
            enum:
              - 1
              - 2
            default: 1
      responses:
        200:
          description: Verification email sent
          content:
            application/json:
              schema:
                example:
                  status: success
                  statusCode: 200
                  message: Verification email sent successfully
                  data: null
                  meta:
                    email_sent_at: 2026-01-31T10:00:00.000Z
                  timestamp: 2026-01-31T10:00:00.000Z
                  path: /api/v1/auth/resend-verification
      security:
        - bearer:
      summary: Resend email verification
      tags:
        - auth
  /api/v1/auth/me:
    get:
      description: Returns the authenticated user profile
      operationId: getCurrentUser
      parameters:
        - name: X-API-Version
          in: header
          required: false
          description: API version for header-based versioning
          schema:
            type: string
            enum:
              - 1
              - 2
            default: 1
      responses:
        200:
          description: User profile retrieved
          content:
            application/json:
              schema:
                example:
                  status: success
                  statusCode: 200
                  message: User profile retrieved successfully
                  data:
                    id: 123e4567-e89b-12d3-a456-426614174000
                    email: john.doe@example.com
                  timestamp: 2026-01-31T10:00:00.000Z
                  path: /api/v1/auth/me
      security:
        - bearer:
      summary: Get current user
      tags:
        - auth
  /api/v1/auth/sessions:
    get:
      operationId: getSessions
      parameters:
        - name: X-API-Version
          in: header
          required: false
          description: API version for header-based versioning
          schema:
            type: string
            enum:
              - 1
              - 2
            default: 1
      responses:
        200:
          description: List of active sessions retrieved successfully
          content:
            application/json:
              schema:
                example:
                  status: success
                  statusCode: 200
                  message: Sessions retrieved successfully
                  data:
                    - id: 123e4567-e89b-12d3-a456-426614174000
                      deviceName: Chrome on macOS
                      deviceType: desktop
                      ipAddress: 192.168.1.1
                      lastActivityAt: 2026-01-31T10:00:00.000Z
                      createdAt: 2026-01-31T09:00:00.000Z
                      expiresAt: 2026-02-07T09:00:00.000Z
                      isCurrent: true
                  timestamp: 2026-01-31T10:00:00.000Z
                  path: /api/v1/auth/sessions
        401:
          description: Unauthorized - Invalid or missing JWT token.
          content:
            application/json:
              schema:
                example:
                  status: error
                  statusCode: 401
                  message: Unauthorized
                  timestamp: 2026-01-31T19:20:00.000Z
                  path: /api/v1/auth/sessions
      security:
        - bearer:
      summary: Get all active sessions
      tags:
        - auth
  /api/v1/auth/sessions/revoke:
    delete:
      operationId: revokeSession
      parameters:
        - name: X-API-Version
          in: header
          required: false
          description: API version for header-based versioning
          schema:
            type: string
            enum:
              - 1
              - 2
            default: 1
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: #/components/schemas/RevokeSessionDto
      responses:
        200:
          description: Session revoked successfully
          content:
            application/json:
              schema:
                example:
                  status: success
                  statusCode: 200
                  message: Session revoked successfully
                  timestamp: 2026-01-31T10:00:00.000Z
                  path: /api/v1/auth/sessions/revoke
        400:
          description: Bad Request - Validation failed.
          content:
            application/json:
              schema:
                example:
                  status: error
                  statusCode: 400
                  message: Validation failed
                  errors:
                    - Field is required
                    - Invalid format
                  timestamp: 2026-01-31T19:20:00.000Z
                  path: /api/v1/auth/sessions/revoke
        401:
          description: Unauthorized - Invalid or missing JWT token.
          content:
            application/json:
              schema:
                example:
                  status: error
                  statusCode: 401
                  message: Unauthorized
                  timestamp: 2026-01-31T19:20:00.000Z
                  path: /api/v1/auth/sessions/revoke
      security:
        - bearer:
      summary: Revoke a specific session
      tags:
        - auth
  /api/v1/auth/sessions/revoke-others:
    delete:
      operationId: revokeOtherSessions
      parameters:
        - name: X-API-Version
          in: header
          required: false
          description: API version for header-based versioning
          schema:
            type: string
            enum:
              - 1
              - 2
            default: 1
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: #/components/schemas/RevokeOtherSessionsDto
      responses:
        200:
          description: Other sessions revoked successfully
          content:
            application/json:
              schema:
                example:
                  status: success
                  statusCode: 200
                  message: All other sessions revoked successfully
                  data:
                    revoked_count: 3
                  timestamp: 2026-01-31T10:00:00.000Z
                  path: /api/v1/auth/sessions/revoke-others
        401:
          description: Unauthorized - Invalid or missing JWT token.
          content:
            application/json:
              schema:
                example:
                  status: error
                  statusCode: 401
                  message: Unauthorized
                  timestamp: 2026-01-31T19:20:00.000Z
                  path: /api/v1/auth/sessions/revoke-others
      security:
        - bearer:
      summary: Revoke all other sessions
      tags:
        - auth
  /api/v1/auth/sessions/logout-all:
    delete:
      operationId: logoutAllDevices
      parameters:
        - name: X-API-Version
          in: header
          required: false
          description: API version for header-based versioning
          schema:
            type: string
            enum:
              - 1
              - 2
            default: 1
      responses:
        200:
          description: Logged out from all devices successfully
          content:
            application/json:
              schema:
                example:
                  status: success
                  statusCode: 200
                  message: Logged out from all devices successfully
                  data:
                    revoked_count: 5
                  timestamp: 2026-01-31T10:00:00.000Z
                  path: /api/v1/auth/sessions/logout-all
        401:
          description: Unauthorized - Invalid or missing JWT token.
          content:
            application/json:
              schema:
                example:
                  status: error
                  statusCode: 401
                  message: Unauthorized
                  timestamp: 2026-01-31T19:20:00.000Z
                  path: /api/v1/auth/sessions/logout-all
      security:
        - bearer:
      summary: Logout from all devices
      tags:
        - auth
  /api/v1/users:
    post:
      description: Creates a new user with email, first name, last name, and password. Password must be at least 8 characters with uppercase, lowercase, number, and special character. Requires Admin role.
      operationId: create
      parameters:
        - name: X-API-Version
          in: header
          required: false
          description: API version for header-based versioning
          schema:
            type: string
            enum:
              - 1
              - 2
            default: 1
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: #/components/schemas/CreateUserDto
      responses:
        201:
          description: User has been successfully created.
          content:
            application/json:
              schema:
                example:
                  status: success
                  statusCode: 201
                  message: User created successfully
                  data:
                    id: 6dd9ca2a-4a9f-4155-ad34-4cf6a575eebe
                    email: john.doe@example.com
                    firstName: John
                    lastName: Doe
                    isActive: true
                    createdAt: 2026-01-27T10:23:22.983Z
                    updatedAt: 2026-01-27T10:23:22.983Z
                  meta:
                    user_id: 6dd9ca2a-4a9f-4155-ad34-4cf6a575eebe
                    created_at: 2026-01-27T10:23:22.983Z
                  timestamp: 2026-01-27T10:23:22.997Z
                  path: /api/v1/users
        400:
          description: Bad Request - Validation failed.
          content:
            application/json:
              schema:
                example:
                  status: error
                  statusCode: 400
                  message: Validation failed
                  errors:
                    - Field is required
                    - Invalid format
                  timestamp: 2026-01-31T19:20:00.000Z
                  path: /api/v1/users
        401:
          description: Unauthorized - Invalid or missing JWT token.
          content:
            application/json:
              schema:
                example:
                  status: error
                  statusCode: 401
                  message: Unauthorized
                  timestamp: 2026-01-31T19:20:00.000Z
                  path: /api/v1/users
        403:
          description: Forbidden - Insufficient permissions.
          content:
            application/json:
              schema:
                example:
                  status: error
                  statusCode: 403
                  message: Forbidden resource
                  timestamp: 2026-01-31T19:20:00.000Z
                  path: /api/v1/users
        409:
          description: Conflict - Resource already exists.
          content:
            application/json:
              schema:
                example:
                  status: error
                  statusCode: 409
                  message: User with this email already exists
                  timestamp: 2026-01-31T19:20:00.000Z
                  path: /api/v1/users
      security:
        - bearer:
      summary: Create a new user (Admin only)
      tags:
        - users
    get:
      description: Retrieves a paginated list of users. Use page and limit query parameters to control pagination. Requires Admin or Moderator role.
      operationId: findAll
      parameters:
        - name: page
          required: false
          in: query
          description: Page number (default: 1)
          schema:
            example: 1
            type: number
        - name: limit
          required: false
          in: query
          description: Items per page (default: 10)
          schema:
            example: 10
            type: number
        - name: X-API-Version
          in: header
          required: false
          description: API version for header-based versioning
          schema:
            type: string
            enum:
              - 1
              - 2
            default: 1
      responses:
        200:
          description: Return all users with pagination.
          content:
            application/json:
              schema:
                example:
                  status: success
                  statusCode: 200
                  message: Users fetched successfully
                  data:
                    - id: 6dd9ca2a-4a9f-4155-ad34-4cf6a575eebe
                      email: john.doe@example.com
                      firstName: John
                      lastName: Doe
                      isActive: true
                      createdAt: 2026-01-27T10:23:22.983Z
                      updatedAt: 2026-01-27T10:23:22.983Z
                  meta:
                    total: 25
                    count: 10
                    page: 2
                    limit: 10
                    total_pages: 3
                    has_next: true
                    has_previous: true
                    timestamp: 2026-01-27T10:28:36.014Z
                  timestamp: 2026-01-27T10:28:36.014Z
                  path: /api/v1/users
      security:
        - bearer:
      summary: Get all users with pagination (Admin/Moderator)
      tags:
        - users
  /api/v1/users/statistics:
    get:
      description: Retrieves user statistics including total, active, inactive, and today registered counts. Requires Admin or Moderator role.
      operationId: getStatistics
      parameters:
        - name: X-API-Version
          in: header
          required: false
          description: API version for header-based versioning
          schema:
            type: string
            enum:
              - 1
              - 2
            default: 1
      responses:
        200:
          description: User statistics retrieved successfully.
          content:
            application/json:
              schema:
                example:
                  status: success
                  statusCode: 200
                  message: Statistics fetched successfully
                  data:
                    total: 125
                    active: 98
                    inactive: 27
                    pending: 0
                    todayRegistered: 5
                  meta:
                    cached: false
                    timestamp: 2026-01-31T10:00:00.000Z
                  timestamp: 2026-01-31T10:00:00.015Z
                  path: /api/v1/users/statistics
        401:
          description: Unauthorized - Invalid or missing JWT token.
          content:
            application/json:
              schema:
                example:
                  status: error
                  statusCode: 401
                  message: Unauthorized
                  timestamp: 2026-01-31T19:20:00.000Z
                  path: /api/v1/users/statistics
        403:
          description: Forbidden - Insufficient permissions.
          content:
            application/json:
              schema:
                example:
                  status: error
                  statusCode: 403
                  message: Forbidden resource
                  timestamp: 2026-01-31T19:20:00.000Z
                  path: /api/v1/users/statistics
      security:
        - bearer:
      summary: Get user statistics (Admin/Moderator)
      tags:
        - users
  /api/v1/users/{id}:
    get:
      description: Retrieves a single user by their UUID. Returns cached data if available.
      operationId: findOne
      parameters:
        - name: id
          required: true
          in: path
          description: User UUID
          schema:
            example: 6dd9ca2a-4a9f-4155-ad34-4cf6a575eebe
            type: string
        - name: X-API-Version
          in: header
          required: false
          description: API version for header-based versioning
          schema:
            type: string
            enum:
              - 1
              - 2
            default: 1
      responses:
        200:
          description: Return the user.
          content:
            application/json:
              schema:
                example:
                  status: success
                  statusCode: 200
                  message: User fetched successfully
                  data:
                    id: 6dd9ca2a-4a9f-4155-ad34-4cf6a575eebe
                    email: john.doe@example.com
                    firstName: John
                    lastName: Doe
                    isActive: true
                    createdAt: 2026-01-27T10:23:22.983Z
                    updatedAt: 2026-01-27T10:23:22.983Z
                  meta:
                    cached: true
                  timestamp: 2026-01-27T10:28:36.014Z
                  path: /api/v1/users/6dd9ca2a-4a9f-4155-ad34-4cf6a575eebe
        404:
          description: User not found.
          content:
            application/json:
              schema:
                example:
                  status: error
                  statusCode: 404
                  message: User not found
                  timestamp: 2026-01-27T10:28:36.014Z
                  path: /api/v1/users/invalid-id
      security:
        - bearer:
      summary: Get a user by ID
      tags:
        - users
    patch:
      description: Updates an existing user. All fields are optional. Cache is invalidated after update.
      operationId: update
      parameters:
        - name: id
          required: true
          in: path
          description: User UUID
          schema:
            example: 6dd9ca2a-4a9f-4155-ad34-4cf6a575eebe
            type: string
        - name: X-API-Version
          in: header
          required: false
          description: API version for header-based versioning
          schema:
            type: string
            enum:
              - 1
              - 2
            default: 1
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: #/components/schemas/UpdateUserDto
      responses:
        200:
          description: User has been successfully updated.
          content:
            application/json:
              schema:
                example:
                  status: success
                  statusCode: 200
                  message: User updated successfully
                  data:
                    id: 6dd9ca2a-4a9f-4155-ad34-4cf6a575eebe
                    email: john.updated@example.com
                    firstName: John
                    lastName: Doe
                    isActive: true
                    createdAt: 2026-01-27T10:23:22.983Z
                    updatedAt: 2026-01-27T10:30:00.000Z
                  meta:
                    user_id: 6dd9ca2a-4a9f-4155-ad34-4cf6a575eebe
                    updated_at: 2026-01-27T10:30:00.000Z
                  timestamp: 2026-01-27T10:30:00.015Z
                  path: /api/v1/users/6dd9ca2a-4a9f-4155-ad34-4cf6a575eebe
        400:
          description: Bad Request - Validation failed.
          content:
            application/json:
              schema:
                example:
                  status: error
                  statusCode: 400
                  message: Validation failed
                  timestamp: 2026-01-27T10:30:00.015Z
                  path: /api/v1/users/6dd9ca2a-4a9f-4155-ad34-4cf6a575eebe
        404:
          description: User not found.
          content:
            application/json:
              schema:
                example:
                  status: error
                  statusCode: 404
                  message: User not found
                  timestamp: 2026-01-27T10:30:00.015Z
                  path: /api/v1/users/invalid-id
        409:
          description: Conflict - Email already exists.
          content:
            application/json:
              schema:
                example:
                  status: error
                  statusCode: 409
                  message: Email already exists
                  timestamp: 2026-01-27T10:30:00.015Z
                  path: /api/v1/users/6dd9ca2a-4a9f-4155-ad34-4cf6a575eebe
      security:
        - bearer:
      summary: Update a user
      tags:
        - users
    delete:
      description: Permanently deletes a user by their UUID. Cache is invalidated after deletion.
      operationId: remove
      parameters:
        - name: id
          required: true
          in: path
          description: User UUID
          schema:
            example: 6dd9ca2a-4a9f-4155-ad34-4cf6a575eebe
            type: string
        - name: X-API-Version
          in: header
          required: false
          description: API version for header-based versioning
          schema:
            type: string
            enum:
              - 1
              - 2
            default: 1
      responses:
        200:
          description: User has been successfully deleted.
          content:
            application/json:
              schema:
                example:
                  status: success
                  statusCode: 200
                  message: User deleted successfully
                  data: null
                  meta:
                    user_id: 6dd9ca2a-4a9f-4155-ad34-4cf6a575eebe
                    deleted_at: 2026-01-27T10:35:00.000Z
                  timestamp: 2026-01-27T10:35:00.015Z
                  path: /api/v1/users/6dd9ca2a-4a9f-4155-ad34-4cf6a575eebe
        404:
          description: User not found.
          content:
            application/json:
              schema:
                example:
                  status: error
                  statusCode: 404
                  message: User not found
                  timestamp: 2026-01-27T10:35:00.015Z
                  path: /api/v1/users/invalid-id
      security:
        - bearer:
      summary: Delete a user
      tags:
        - users
  /api/v1/users/search/advanced:
    get:
      description: Search users with filters (search query, active status), sorting, and pagination.
      operationId: search
      parameters:
        - name: search
          required: false
          in: query
          description: Search query for name or email
          schema:
            example: john
            type: string
        - name: isActive
          required: false
          in: query
          description: Filter by active status
          schema:
            example: true
            type: string
        - name: sortBy
          required: false
          in: query
          description: Sort by field
          schema:
            enum:
              - email
              - firstName
              - lastName
              - createdAt
              - isActive
            type: string
        - name: sortOrder
          required: false
          in: query
          description: Sort direction
          schema:
            enum:
              - asc
              - desc
            type: string
        - name: page
          required: false
          in: query
          description: Page number
          schema:
            minimum: 1
            example: 1
            type: number
        - name: limit
          required: false
          in: query
          description: Items per page
          schema:
            minimum: 1
            example: 10
            type: number
        - name: X-API-Version
          in: header
          required: false
          description: API version for header-based versioning
          schema:
            type: string
            enum:
              - 1
              - 2
            default: 1
      responses:
        200:
          description: Users search results with filters and pagination.
          content:
            application/json:
              schema:
                example:
                  status: success
                  statusCode: 200
                  message: Users searched successfully
                  data:
                    - id: 6dd9ca2a-4a9f-4155-ad34-4cf6a575eebe
                      email: john.doe@example.com
                      firstName: John
                      lastName: Doe
                      isActive: true
                      createdAt: 2026-01-27T10:23:22.983Z
                      updatedAt: 2026-01-27T10:23:22.983Z
                  meta:
                    total: 15
                    count: 10
                    page: 1
                    limit: 10
                    total_pages: 2
                    has_next: true
                    has_previous: false
                    search_query: john
                    filters:
                      isActive: true
                    sort:
                      field: email
                      order: asc
                  timestamp: 2026-01-27T10:40:00.000Z
                  path: /api/v1/users/search/advanced
      security:
        - bearer:
      summary: Advanced search for users
      tags:
        - users
  /api/v1/users/bulk/activate:
    post:
      description: Activates multiple users by their IDs.
      operationId: bulkActivate
      parameters:
        - name: X-API-Version
          in: header
          required: false
          description: API version for header-based versioning
          schema:
            type: string
            enum:
              - 1
              - 2
            default: 1
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: #/components/schemas/BulkUserIdsDto
      responses:
        200:
          description: Users have been successfully activated.
          content:
            application/json:
              schema:
                example:
                  status: success
                  statusCode: 200
                  message: Successfully activated 5 user(s)
                  data:
                    affected: 5
                  meta:
                    requested: 5
                    affected: 5
                    operation: activate
                  timestamp: 2026-01-27T10:45:00.000Z
                  path: /api/v1/users/bulk/activate
      security:
        - bearer:
      summary: Bulk activate users
      tags:
        - users
  /api/v1/users/bulk/deactivate:
    post:
      description: Deactivates multiple users by their IDs.
      operationId: bulkDeactivate
      parameters:
        - name: X-API-Version
          in: header
          required: false
          description: API version for header-based versioning
          schema:
            type: string
            enum:
              - 1
              - 2
            default: 1
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: #/components/schemas/BulkUserIdsDto
      responses:
        200:
          description: Users have been successfully deactivated.
          content:
            application/json:
              schema:
                example:
                  status: success
                  statusCode: 200
                  message: Successfully deactivated 3 user(s)
                  data:
                    affected: 3
                  meta:
                    requested: 3
                    affected: 3
                    operation: deactivate
                  timestamp: 2026-01-27T10:50:00.000Z
                  path: /api/v1/users/bulk/deactivate
      security:
        - bearer:
      summary: Bulk deactivate users
      tags:
        - users
  /api/v1/users/bulk:
    delete:
      description: Permanently deletes multiple users by their IDs.
      operationId: bulkDelete
      parameters:
        - name: X-API-Version
          in: header
          required: false
          description: API version for header-based versioning
          schema:
            type: string
            enum:
              - 1
              - 2
            default: 1
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: #/components/schemas/BulkUserIdsDto
      responses:
        200:
          description: Users have been successfully deleted.
          content:
            application/json:
              schema:
                example:
                  status: success
                  statusCode: 200
                  message: Successfully deleted 2 user(s)
                  data:
                    affected: 2
                  meta:
                    requested: 2
                    affected: 2
                    operation: delete
                  timestamp: 2026-01-27T10:55:00.000Z
                  path: /api/v1/users/bulk
      security:
        - bearer:
      summary: Bulk delete users
      tags:
        - users
  /api/v1/roles:
    post:
      operationId: create
      parameters:
        - name: X-API-Version
          in: header
          required: false
          description: API version for header-based versioning
          schema:
            type: string
            enum:
              - 1
              - 2
            default: 1
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: #/components/schemas/CreateRoleDto
      responses:
        201:
          description: Role created successfully
        400:
          description: Bad Request - Validation failed.
          content:
            application/json:
              schema:
                example:
                  status: error
                  statusCode: 400
                  message: Validation failed
                  errors:
                    - Field is required
                    - Invalid format
                  timestamp: 2026-01-31T19:20:00.000Z
                  path: /api/v1/roles
        401:
          description: Unauthorized - Invalid or missing JWT token.
          content:
            application/json:
              schema:
                example:
                  status: error
                  statusCode: 401
                  message: Unauthorized
                  timestamp: 2026-01-31T19:20:00.000Z
                  path: /api/v1/roles
        403:
          description: Forbidden - Insufficient permissions.
          content:
            application/json:
              schema:
                example:
                  status: error
                  statusCode: 403
                  message: Forbidden resource
                  timestamp: 2026-01-31T19:20:00.000Z
                  path: /api/v1/roles
        409:
          description: Conflict - Resource already exists.
          content:
            application/json:
              schema:
                example:
                  status: error
                  statusCode: 409
                  message: Role already exists
                  timestamp: 2026-01-31T19:20:00.000Z
                  path: /api/v1/roles
      security:
        - bearer:
      summary: Create a new role (Admin only)
      tags:
        - RBAC - Roles
    get:
      operationId: findAll
      parameters:
        - name: page
          required: true
          in: query
          schema:
            type: string
        - name: limit
          required: true
          in: query
          schema:
            type: string
        - name: X-API-Version
          in: header
          required: false
          description: API version for header-based versioning
          schema:
            type: string
            enum:
              - 1
              - 2
            default: 1
      responses:
        200:
          description: Roles fetched successfully
        401:
          description: Unauthorized - Invalid or missing JWT token.
          content:
            application/json:
              schema:
                example:
                  status: error
                  statusCode: 401
                  message: Unauthorized
                  timestamp: 2026-01-31T19:20:00.000Z
                  path: /api/v1/roles
      security:
        - bearer:
      summary: Get all roles with pagination
      tags:
        - RBAC - Roles
  /api/v1/roles/statistics:
    get:
      operationId: getStatistics
      parameters:
        - name: X-API-Version
          in: header
          required: false
          description: API version for header-based versioning
          schema:
            type: string
            enum:
              - 1
              - 2
            default: 1
      responses:
        200:
          description: Role statistics fetched successfully
        401:
          description: Unauthorized - Invalid or missing JWT token.
          content:
            application/json:
              schema:
                example:
                  status: error
                  statusCode: 401
                  message: Unauthorized
                  timestamp: 2026-01-31T19:20:00.000Z
                  path: /api/v1/roles/statistics
      security:
        - bearer:
      summary: Get role statistics
      tags:
        - RBAC - Roles
  /api/v1/roles/{id}:
    get:
      operationId: findOne
      parameters:
        - name: id
          required: true
          in: path
          schema:
            type: string
        - name: X-API-Version
          in: header
          required: false
          description: API version for header-based versioning
          schema:
            type: string
            enum:
              - 1
              - 2
            default: 1
      responses:
        200:
          description: Role fetched successfully
        401:
          description: Unauthorized - Invalid or missing JWT token.
          content:
            application/json:
              schema:
                example:
                  status: error
                  statusCode: 401
                  message: Unauthorized
                  timestamp: 2026-01-31T19:20:00.000Z
                  path: /api/v1/roles/:id
        404:
          description: Not Found - Role not found.
          content:
            application/json:
              schema:
                example:
                  status: error
                  statusCode: 404
                  message: Role not found
                  timestamp: 2026-01-31T19:20:00.000Z
                  path: /api/v1/roles/:id
      security:
        - bearer:
      summary: Get role by ID
      tags:
        - RBAC - Roles
    put:
      operationId: update
      parameters:
        - name: id
          required: true
          in: path
          schema:
            type: string
        - name: X-API-Version
          in: header
          required: false
          description: API version for header-based versioning
          schema:
            type: string
            enum:
              - 1
              - 2
            default: 1
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: #/components/schemas/UpdateRoleDto
      responses:
        200:
          description: Role updated successfully
        400:
          description: Bad Request - Validation failed.
          content:
            application/json:
              schema:
                example:
                  status: error
                  statusCode: 400
                  message: Validation failed
                  errors:
                    - Field is required
                    - Invalid format
                  timestamp: 2026-01-31T19:20:00.000Z
                  path: /api/v1/roles/:id
        401:
          description: Unauthorized - Invalid or missing JWT token.
          content:
            application/json:
              schema:
                example:
                  status: error
                  statusCode: 401
                  message: Unauthorized
                  timestamp: 2026-01-31T19:20:00.000Z
                  path: /api/v1/roles/:id
        403:
          description: Forbidden - Insufficient permissions.
          content:
            application/json:
              schema:
                example:
                  status: error
                  statusCode: 403
                  message: Forbidden resource
                  timestamp: 2026-01-31T19:20:00.000Z
                  path: /api/v1/roles/:id
        404:
          description: Not Found - Role not found.
          content:
            application/json:
              schema:
                example:
                  status: error
                  statusCode: 404
                  message: Role not found
                  timestamp: 2026-01-31T19:20:00.000Z
                  path: /api/v1/roles/:id
      security:
        - bearer:
      summary: Update role (Admin only)
      tags:
        - RBAC - Roles
    delete:
      operationId: remove
      parameters:
        - name: id
          required: true
          in: path
          schema:
            type: string
        - name: X-API-Version
          in: header
          required: false
          description: API version for header-based versioning
          schema:
            type: string
            enum:
              - 1
              - 2
            default: 1
      responses:
        200:
          description: Role deleted successfully
        401:
          description: Unauthorized - Invalid or missing JWT token.
          content:
            application/json:
              schema:
                example:
                  status: error
                  statusCode: 401
                  message: Unauthorized
                  timestamp: 2026-01-31T19:20:00.000Z
                  path: /api/v1/roles/:id
        403:
          description: Forbidden - Insufficient permissions.
          content:
            application/json:
              schema:
                example:
                  status: error
                  statusCode: 403
                  message: Forbidden resource
                  timestamp: 2026-01-31T19:20:00.000Z
                  path: /api/v1/roles/:id
        404:
          description: Not Found - Role not found.
          content:
            application/json:
              schema:
                example:
                  status: error
                  statusCode: 404
                  message: Role not found
                  timestamp: 2026-01-31T19:20:00.000Z
                  path: /api/v1/roles/:id
      security:
        - bearer:
      summary: Delete role (Admin only)
      tags:
        - RBAC - Roles
  /api/v1/permissions:
    post:
      operationId: create
      parameters:
        - name: X-API-Version
          in: header
          required: false
          description: API version for header-based versioning
          schema:
            type: string
            enum:
              - 1
              - 2
            default: 1
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: #/components/schemas/CreatePermissionDto
      responses:
        201:
          description: Permission created successfully
        400:
          description: Bad Request - Validation failed.
          content:
            application/json:
              schema:
                example:
                  status: error
                  statusCode: 400
                  message: Validation failed
                  errors:
                    - Field is required
                    - Invalid format
                  timestamp: 2026-01-31T19:20:00.000Z
                  path: /api/v1/permissions
        401:
          description: Unauthorized - Invalid or missing JWT token.
          content:
            application/json:
              schema:
                example:
                  status: error
                  statusCode: 401
                  message: Unauthorized
                  timestamp: 2026-01-31T19:20:00.000Z
                  path: /api/v1/permissions
        403:
          description: Forbidden - Insufficient permissions.
          content:
            application/json:
              schema:
                example:
                  status: error
                  statusCode: 403
                  message: Forbidden resource
                  timestamp: 2026-01-31T19:20:00.000Z
                  path: /api/v1/permissions
        409:
          description: Conflict - Resource already exists.
          content:
            application/json:
              schema:
                example:
                  status: error
                  statusCode: 409
                  message: Permission already exists
                  timestamp: 2026-01-31T19:20:00.000Z
                  path: /api/v1/permissions
      security:
        - bearer:
      summary: Create a new permission (Admin only)
      tags:
        - RBAC - Permissions
    get:
      operationId: findAll
      parameters:
        - name: X-API-Version
          in: header
          required: false
          description: API version for header-based versioning
          schema:
            type: string
            enum:
              - 1
              - 2
            default: 1
      responses:
        200:
          description: Permissions fetched successfully
        401:
          description: Unauthorized - Invalid or missing JWT token.
          content:
            application/json:
              schema:
                example:
                  status: error
                  statusCode: 401
                  message: Unauthorized
                  timestamp: 2026-01-31T19:20:00.000Z
                  path: /api/v1/permissions
      security:
        - bearer:
      summary: Get all permissions
      tags:
        - RBAC - Permissions
  /api/v1/permissions/statistics:
    get:
      operationId: getStatistics
      parameters:
        - name: X-API-Version
          in: header
          required: false
          description: API version for header-based versioning
          schema:
            type: string
            enum:
              - 1
              - 2
            default: 1
      responses:
        200:
          description: Permission statistics fetched successfully
        401:
          description: Unauthorized - Invalid or missing JWT token.
          content:
            application/json:
              schema:
                example:
                  status: error
                  statusCode: 401
                  message: Unauthorized
                  timestamp: 2026-01-31T19:20:00.000Z
                  path: /api/v1/permissions/statistics
      security:
        - bearer:
      summary: Get permission statistics
      tags:
        - RBAC - Permissions
  /api/v1/users/{userId}/roles:
    post:
      operationId: assignRoles
      parameters:
        - name: userId
          required: true
          in: path
          schema:
            type: string
        - name: X-API-Version
          in: header
          required: false
          description: API version for header-based versioning
          schema:
            type: string
            enum:
              - 1
              - 2
            default: 1
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: #/components/schemas/AssignRoleDto
      responses:
        200:
          description: Roles assigned successfully
        400:
          description: Bad Request - Validation failed.
          content:
            application/json:
              schema:
                example:
                  status: error
                  statusCode: 400
                  message: Validation failed
                  errors:
                    - Field is required
                    - Invalid format
                  timestamp: 2026-01-31T19:20:00.000Z
                  path: /api/v1/users/:userId/roles
        401:
          description: Unauthorized - Invalid or missing JWT token.
          content:
            application/json:
              schema:
                example:
                  status: error
                  statusCode: 401
                  message: Unauthorized
                  timestamp: 2026-01-31T19:20:00.000Z
                  path: /api/v1/users/:userId/roles
        403:
          description: Forbidden - Insufficient permissions.
          content:
            application/json:
              schema:
                example:
                  status: error
                  statusCode: 403
                  message: Forbidden resource
                  timestamp: 2026-01-31T19:20:00.000Z
                  path: /api/v1/users/:userId/roles
        404:
          description: Not Found - User not found.
          content:
            application/json:
              schema:
                example:
                  status: error
                  statusCode: 404
                  message: User not found
                  timestamp: 2026-01-31T19:20:00.000Z
                  path: /api/v1/users/:userId/roles
      security:
        - bearer:
      summary: Assign roles to user (Admin only)
      tags:
        - RBAC - User Roles
    get:
      operationId: getUserRoles
      parameters:
        - name: userId
          required: true
          in: path
          schema:
            type: string
        - name: X-API-Version
          in: header
          required: false
          description: API version for header-based versioning
          schema:
            type: string
            enum:
              - 1
              - 2
            default: 1
      responses:
        200:
          description: User roles fetched successfully
        401:
          description: Unauthorized - Invalid or missing JWT token.
          content:
            application/json:
              schema:
                example:
                  status: error
                  statusCode: 401
                  message: Unauthorized
                  timestamp: 2026-01-31T19:20:00.000Z
                  path: /api/v1/users/:userId/roles
        404:
          description: Not Found - User not found.
          content:
            application/json:
              schema:
                example:
                  status: error
                  statusCode: 404
                  message: User not found
                  timestamp: 2026-01-31T19:20:00.000Z
                  path: /api/v1/users/:userId/roles
      security:
        - bearer:
      summary: Get user roles
      tags:
        - RBAC - User Roles
  /api/v1/users/{userId}/roles/{roleId}:
    delete:
      operationId: removeRole
      parameters:
        - name: userId
          required: true
          in: path
          schema:
            type: string
        - name: roleId
          required: true
          in: path
          schema:
            type: string
        - name: X-API-Version
          in: header
          required: false
          description: API version for header-based versioning
          schema:
            type: string
            enum:
              - 1
              - 2
            default: 1
      responses:
        200:
          description: Role removed successfully
        401:
          description: Unauthorized - Invalid or missing JWT token.
          content:
            application/json:
              schema:
                example:
                  status: error
                  statusCode: 401
                  message: Unauthorized
                  timestamp: 2026-01-31T19:20:00.000Z
                  path: /api/v1/users/:userId/roles/:roleId
        403:
          description: Forbidden - Insufficient permissions.
          content:
            application/json:
              schema:
                example:
                  status: error
                  statusCode: 403
                  message: Forbidden resource
                  timestamp: 2026-01-31T19:20:00.000Z
                  path: /api/v1/users/:userId/roles/:roleId
        404:
          description: Not Found - User or Role not found.
          content:
            application/json:
              schema:
                example:
                  status: error
                  statusCode: 404
                  message: User or Role not found
                  timestamp: 2026-01-31T19:20:00.000Z
                  path: /api/v1/users/:userId/roles/:roleId
      security:
        - bearer:
      summary: Remove role from user (Admin only)
      tags:
        - RBAC - User Roles
  /api/v1/newsletter/subscribe:
    post:
      operationId: subscribe
      parameters:
        - name: X-API-Version
          in: header
          required: false
          description: API version for header-based versioning
          schema:
            type: string
            enum:
              - 1
              - 2
            default: 1
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: #/components/schemas/SubscribeNewsletterDto
      responses:
        201:
          description: Successfully subscribed to newsletter
          content:
            application/json:
              schema:
                example:
                  status: success
                  statusCode: 201
                  message: Successfully subscribed to newsletter
                  data:
                    id: 123e4567-e89b-12d3-a456-426614174000
                    email: user@example.com
                    firstName: John
                    lastName: Doe
                    isActive: true
                    subscribedAt: 2026-02-01T10:00:00.000Z
                  meta:
                    subscriber_id: 123e4567-e89b-12d3-a456-426614174000
                    subscribed_at: 2026-02-01T10:00:00.000Z
        400:
          description: Bad Request - Validation failed.
          content:
            application/json:
              schema:
                example:
                  status: error
                  statusCode: 400
                  message: Validation failed
                  errors:
                    - Field is required
                    - Invalid format
                  timestamp: 2026-01-31T19:20:00.000Z
                  path: /api/v1/newsletter/subscribe
        409:
          description: Conflict - Resource already exists.
          content:
            application/json:
              schema:
                example:
                  status: error
                  statusCode: 409
                  message: Email already subscribed to newsletter
                  timestamp: 2026-01-31T19:20:00.000Z
                  path: /api/v1/newsletter/subscribe
      summary: Subscribe to newsletter (public)
      tags:
        - newsletter
  /api/v1/newsletter/unsubscribe/{email}:
    post:
      operationId: unsubscribe
      parameters:
        - name: email
          required: true
          in: path
          schema:
            type: string
        - name: X-API-Version
          in: header
          required: false
          description: API version for header-based versioning
          schema:
            type: string
            enum:
              - 1
              - 2
            default: 1
      responses:
        200:
          description: Successfully unsubscribed from newsletter
          content:
            application/json:
              schema:
                example:
                  status: success
                  statusCode: 200
                  message: Successfully unsubscribed from newsletter
                  meta:
                    unsubscribed_at: 2026-02-01T10:00:00.000Z
        400:
          description: Bad Request - Validation failed.
          content:
            application/json:
              schema:
                example:
                  status: error
                  statusCode: 400
                  message: Validation failed
                  errors:
                    - Field is required
                    - Invalid format
                  timestamp: 2026-01-31T19:20:00.000Z
                  path: /api/v1/newsletter/unsubscribe/:email
        404:
          description: Not Found - Email not found.
          content:
            application/json:
              schema:
                example:
                  status: error
                  statusCode: 404
                  message: Email not found
                  timestamp: 2026-01-31T19:20:00.000Z
                  path: /api/v1/newsletter/unsubscribe/:email
      summary: Unsubscribe from newsletter (public)
      tags:
        - newsletter
  /api/v1/newsletter:
    get:
      operationId: findAll
      parameters:
        - name: page
          required: true
          in: query
          schema:
            type: string
        - name: limit
          required: true
          in: query
          schema:
            type: string
        - name: X-API-Version
          in: header
          required: false
          description: API version for header-based versioning
          schema:
            type: string
            enum:
              - 1
              - 2
            default: 1
      responses:
        200:
          description: Newsletter subscribers fetched successfully
          content:
            application/json:
              schema:
                example:
                  status: success
                  statusCode: 200
                  message: Newsletter subscribers fetched successfully
                  data:
                    - id: 123e4567-e89b-12d3-a456-426614174000
                      email: user@example.com
                      firstName: John
                      lastName: Doe
                      isActive: true
                      subscribedAt: 2026-02-01T10:00:00.000Z
                  meta:
                    total: 100
                    count: 50
                    page: 1
                    limit: 50
                    total_pages: 2
                    has_next: true
                    has_previous: false
        401:
          description: Unauthorized - Invalid or missing JWT token.
          content:
            application/json:
              schema:
                example:
                  status: error
                  statusCode: 401
                  message: Unauthorized
                  timestamp: 2026-01-31T19:20:00.000Z
                  path: /api/v1/newsletter
      security:
        - bearer:
      summary: Get all newsletter subscribers (admin)
      tags:
        - newsletter
  /api/v1/newsletter/statistics:
    get:
      operationId: getStatistics
      parameters:
        - name: X-API-Version
          in: header
          required: false
          description: API version for header-based versioning
          schema:
            type: string
            enum:
              - 1
              - 2
            default: 1
      responses:
        200:
          description: Newsletter statistics fetched successfully
          content:
            application/json:
              schema:
                example:
                  status: success
                  statusCode: 200
                  message: Newsletter statistics fetched successfully
                  data:
                    total: 1000
                    active: 850
                    inactive: 150
                    todaySubscribed: 25
        401:
          description: Unauthorized - Invalid or missing JWT token.
          content:
            application/json:
              schema:
                example:
                  status: error
                  statusCode: 401
                  message: Unauthorized
                  timestamp: 2026-01-31T19:20:00.000Z
                  path: /api/v1/newsletter/statistics
      security:
        - bearer:
      summary: Get newsletter statistics (admin)
      tags:
        - newsletter
  /api/v1/newsletter/send:
    post:
      operationId: sendNewsletter
      parameters:
        - name: X-API-Version
          in: header
          required: false
          description: API version for header-based versioning
          schema:
            type: string
            enum:
              - 1
              - 2
            default: 1
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: #/components/schemas/SendNewsletterDto
      responses:
        200:
          description: Newsletter sent successfully
          content:
            application/json:
              schema:
                example:
                  status: success
                  statusCode: 200
                  message: Newsletter sent successfully
                  meta:
                    total_subscribers: 850
                    sent: 845
                    failed: 5
        400:
          description: Bad Request - Validation failed.
          content:
            application/json:
              schema:
                example:
                  status: error
                  statusCode: 400
                  message: Validation failed
                  errors:
                    - Field is required
                    - Invalid format
                  timestamp: 2026-01-31T19:20:00.000Z
                  path: /api/v1/newsletter/send
        401:
          description: Unauthorized - Invalid or missing JWT token.
          content:
            application/json:
              schema:
                example:
                  status: error
                  statusCode: 401
                  message: Unauthorized
                  timestamp: 2026-01-31T19:20:00.000Z
                  path: /api/v1/newsletter/send
      security:
        - bearer:
      summary: Send newsletter to all active subscribers (admin)
      tags:
        - newsletter
  /api/v1/newsletter/{id}:
    delete:
      operationId: remove
      parameters:
        - name: id
          required: true
          in: path
          schema:
            type: string
        - name: X-API-Version
          in: header
          required: false
          description: API version for header-based versioning
          schema:
            type: string
            enum:
              - 1
              - 2
            default: 1
      responses:
        200:
          description: Subscriber deleted successfully
          content:
            application/json:
              schema:
                example:
                  status: success
                  statusCode: 200
                  message: Subscriber deleted successfully
                  meta:
                    deleted_id: 123e4567-e89b-12d3-a456-426614174000
        401:
          description: Unauthorized - Invalid or missing JWT token.
          content:
            application/json:
              schema:
                example:
                  status: error
                  statusCode: 401
                  message: Unauthorized
                  timestamp: 2026-01-31T19:20:00.000Z
                  path: /api/v1/newsletter/:id
        404:
          description: Not Found - Subscriber not found.
          content:
            application/json:
              schema:
                example:
                  status: error
                  statusCode: 404
                  message: Subscriber not found
                  timestamp: 2026-01-31T19:20:00.000Z
                  path: /api/v1/newsletter/:id
      security:
        - bearer:
      summary: Delete newsletter subscriber (admin)
      tags:
        - newsletter
  /api/v1/analytics/track:
    post:
      operationId: trackVisitor
      parameters:
        - name: X-API-Version
          in: header
          required: false
          description: API version for header-based versioning
          schema:
            type: string
            enum:
              - 1
              - 2
            default: 1
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: #/components/schemas/TrackVisitorDto
      responses:
        201:
          description: Visitor tracked successfully
          content:
            application/json:
              schema:
                example:
                  status: success
                  statusCode: 201
                  message: Visitor tracked successfully
                  data:
                    tracked: true
                    visitorId: uuid
      summary: Track website visitor
      tags:
        - analytics
  /api/v1/analytics/dashboard:
    get:
      operationId: getAnalytics
      parameters:
        - name: X-API-Version
          in: header
          required: false
          description: API version for header-based versioning
          schema:
            type: string
            enum:
              - 1
              - 2
            default: 1
      responses:
        200:
          description: Analytics data fetched successfully
          content:
            application/json:
              schema:
                example:
                  status: success
                  statusCode: 200
                  message: Analytics fetched successfully
                  data:
                    overview:
                      totalVisitors: 1250
                      uniqueVisitors: 850
                      todayVisitors: 45
                      weekVisitors: 320
                      monthVisitors: 1150
                      returningVisitors: 400
                      newVisitors: 850
                    topCountries:
                      - country: United States
                        countryCode: US
                        count: 450
                      - country: India
                        countryCode: IN
                        count: 320
                    topCities:
                      - city: New York
                        country: United States
                        count: 120
                    topPages:
                      - page: /
                        count: 500
                      - page: /about
                        count: 250
                    browserStats:
                      - browser: Chrome
                        count: 800
                      - browser: Safari
                        count: 300
                    osStats:
                      - os: Windows
                        count: 600
                      - os: Mac OS
                        count: 400
                    deviceStats:
                      - device: desktop
                        count: 800
                      - device: mobile
                        count: 400
        401:
          description: Unauthorized - Invalid or missing JWT token.
          content:
            application/json:
              schema:
                example:
                  status: error
                  statusCode: 401
                  message: Unauthorized
                  timestamp: 2026-01-31T19:20:00.000Z
                  path: /api/v1/analytics/dashboard
      security:
        - bearer:
      summary: Get analytics dashboard data
      tags:
        - analytics
  /api/v1/analytics/recent:
    get:
      operationId: getRecentVisitors
      parameters:
        - name: limit
          required: false
          in: query
          schema:
            example: 50
            type: number
        - name: X-API-Version
          in: header
          required: false
          description: API version for header-based versioning
          schema:
            type: string
            enum:
              - 1
              - 2
            default: 1
      responses:
        200:
          description: Recent visitors fetched successfully
        401:
          description: Unauthorized - Invalid or missing JWT token.
          content:
            application/json:
              schema:
                example:
                  status: error
                  statusCode: 401
                  message: Unauthorized
                  timestamp: 2026-01-31T19:20:00.000Z
                  path: /api/v1/analytics/recent
      security:
        - bearer:
      summary: Get recent visitors
      tags:
        - analytics
  /api/v1/contact:
    post:
      description: Public endpoint for contact form submissions. Sends email to admin.
      operationId: create
      parameters:
        - name: X-API-Version
          in: header
          required: false
          description: API version for header-based versioning
          schema:
            type: string
            enum:
              - 1
              - 2
            default: 1
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: #/components/schemas/CreateContactDto
      responses:
        201:
          description: Contact form submitted successfully
          content:
            application/json:
              schema:
                example:
                  status: success
                  statusCode: 201
                  message: Thank you for contacting us! We will get back to you soon.
                  data:
                    id: uuid
                    name: John Doe
                    email: john@example.com
                    subject: General Inquiry
                    message: I would like to know more...
                    status: new
                    createdAt: 2026-02-01T10:00:00.000Z
                  meta:
                    contact_id: uuid
                    created_at: 2026-02-01T10:00:00.000Z
        400:
          description: Bad Request - Validation failed.
          content:
            application/json:
              schema:
                example:
                  status: error
                  statusCode: 400
                  message: Validation failed
                  errors:
                    - Field is required
                    - Invalid format
                  timestamp: 2026-01-31T19:20:00.000Z
                  path: /api/v1/contact
      summary: Submit contact form
      tags:
        - contact
    get:
      description: Admin endpoint to retrieve contact submissions with pagination and filtering
      operationId: findAll
      parameters:
        - name: page
          required: false
          in: query
          description: Page number
          schema:
            example: 1
            type: number
        - name: limit
          required: false
          in: query
          description: Items per page
          schema:
            example: 20
            type: number
        - name: status
          required: false
          in: query
          description: Filter by status
          schema:
            example: new
            type: string
        - name: X-API-Version
          in: header
          required: false
          description: API version for header-based versioning
          schema:
            type: string
            enum:
              - 1
              - 2
            default: 1
      responses:
        200:
          description: Contact submissions fetched successfully
          content:
            application/json:
              schema:
                example:
                  status: success
                  statusCode: 200
                  message: Contact submissions fetched successfully
                  data:
                    - id: uuid
                      name: John Doe
                      email: john@example.com
                      phone: +1234567890
                      subject: General Inquiry
                      message: I would like to know more...
                      status: new
                      ipAddress: 192.168.1.1
                      createdAt: 2026-02-01T10:00:00.000Z
                  meta:
                    total: 50
                    count: 20
                    page: 1
                    limit: 20
                    total_pages: 3
                    has_next: true
                    has_previous: false
        401:
          description: Unauthorized - Invalid or missing JWT token.
          content:
            application/json:
              schema:
                example:
                  status: error
                  statusCode: 401
                  message: Unauthorized
                  timestamp: 2026-01-31T19:20:00.000Z
                  path: /api/v1/contact
      security:
        - bearer:
      summary: Get all contact submissions
      tags:
        - contact
  /api/v1/contact/statistics:
    get:
      description: Admin endpoint to get contact submission statistics
      operationId: getStatistics
      parameters:
        - name: X-API-Version
          in: header
          required: false
          description: API version for header-based versioning
          schema:
            type: string
            enum:
              - 1
              - 2
            default: 1
      responses:
        200:
          description: Statistics fetched successfully
          content:
            application/json:
              schema:
                example:
                  status: success
                  statusCode: 200
                  message: Contact statistics fetched successfully
                  data:
                    total: 150
                    new: 25
                    read: 50
                    replied: 60
                    today: 5
        401:
          description: Unauthorized - Invalid or missing JWT token.
          content:
            application/json:
              schema:
                example:
                  status: error
                  statusCode: 401
                  message: Unauthorized
                  timestamp: 2026-01-31T19:20:00.000Z
                  path: /api/v1/contact/statistics
      security:
        - bearer:
      summary: Get contact statistics
      tags:
        - contact
  /api/v1/contact/{id}:
    get:
      description: Admin endpoint to get single contact submission. Auto-marks as read.
      operationId: findOne
      parameters:
        - name: id
          required: true
          in: path
          schema:
            type: string
        - name: X-API-Version
          in: header
          required: false
          description: API version for header-based versioning
          schema:
            type: string
            enum:
              - 1
              - 2
            default: 1
      responses:
        200:
          description: Contact submission fetched successfully
        401:
          description: Unauthorized - Invalid or missing JWT token.
          content:
            application/json:
              schema:
                example:
                  status: error
                  statusCode: 401
                  message: Unauthorized
                  timestamp: 2026-01-31T19:20:00.000Z
                  path: /api/v1/contact/:id
        404:
          description: Not Found - Contact not found.
          content:
            application/json:
              schema:
                example:
                  status: error
                  statusCode: 404
                  message: Contact not found
                  timestamp: 2026-01-31T19:20:00.000Z
                  path: /api/v1/contact/:id
      security:
        - bearer:
      summary: Get contact submission by ID
      tags:
        - contact
    patch:
      description: Admin endpoint to update contact submission status
      operationId: update
      parameters:
        - name: id
          required: true
          in: path
          schema:
            type: string
        - name: X-API-Version
          in: header
          required: false
          description: API version for header-based versioning
          schema:
            type: string
            enum:
              - 1
              - 2
            default: 1
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: #/components/schemas/UpdateContactDto
      responses:
        200:
          description: Contact status updated successfully
        401:
          description: Unauthorized - Invalid or missing JWT token.
          content:
            application/json:
              schema:
                example:
                  status: error
                  statusCode: 401
                  message: Unauthorized
                  timestamp: 2026-01-31T19:20:00.000Z
                  path: /api/v1/contact/:id
        404:
          description: Not Found - Contact not found.
          content:
            application/json:
              schema:
                example:
                  status: error
                  statusCode: 404
                  message: Contact not found
                  timestamp: 2026-01-31T19:20:00.000Z
                  path: /api/v1/contact/:id
      security:
        - bearer:
      summary: Update contact status
      tags:
        - contact
    delete:
      description: Admin endpoint to delete contact submission
      operationId: remove
      parameters:
        - name: id
          required: true
          in: path
          schema:
            type: string
        - name: X-API-Version
          in: header
          required: false
          description: API version for header-based versioning
          schema:
            type: string
            enum:
              - 1
              - 2
            default: 1
      responses:
        200:
          description: Contact submission deleted successfully
        401:
          description: Unauthorized - Invalid or missing JWT token.
          content:
            application/json:
              schema:
                example:
                  status: error
                  statusCode: 401
                  message: Unauthorized
                  timestamp: 2026-01-31T19:20:00.000Z
                  path: /api/v1/contact/:id
        404:
          description: Not Found - Contact not found.
          content:
            application/json:
              schema:
                example:
                  status: error
                  statusCode: 404
                  message: Contact not found
                  timestamp: 2026-01-31T19:20:00.000Z
                  path: /api/v1/contact/:id
      security:
        - bearer:
      summary: Delete contact submission
      tags:
        - contact
  /api/v1/blog:
    post:
      operationId: create
      parameters:
        - name: X-API-Version
          in: header
          required: false
          description: API version for header-based versioning
          schema:
            type: string
            enum:
              - 1
              - 2
            default: 1
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: #/components/schemas/CreateBlogPostDto
      responses:
        201:
          description: Blog post created successfully
          content:
            application/json:
              schema:
                example:
                  status: success
                  statusCode: 201
                  message: Blog post created successfully
                  data:
                    id: uuid
                    title: How to Build a Modern Web App
                    slug: how-to-build-a-modern-web-app
                    content: <h1>Introduction</h1>
                    status: draft
                    readTime: 5
                    createdAt: 2026-02-02T10:00:00.000Z
                  meta:
                    blog_post_id: uuid
                    slug: how-to-build-a-modern-web-app
                    created_at: 2026-02-02T10:00:00.000Z
        400:
          description: Bad Request - Validation failed.
          content:
            application/json:
              schema:
                example:
                  status: error
                  statusCode: 400
                  message: Validation failed
                  errors:
                    - Field is required
                    - Invalid format
                  timestamp: 2026-01-31T19:20:00.000Z
                  path: /api/v1/blog
        401:
          description: Unauthorized - Invalid or missing JWT token.
          content:
            application/json:
              schema:
                example:
                  status: error
                  statusCode: 401
                  message: Unauthorized
                  timestamp: 2026-01-31T19:20:00.000Z
                  path: /api/v1/blog
      security:
        - bearer:
      summary: Create a new blog post
      tags:
        - blog
  /api/v1/blog/admin:
    get:
      operationId: findAll
      parameters:
        - name: page
          required: false
          in: query
          schema:
            type: number
        - name: limit
          required: false
          in: query
          schema:
            type: number
        - name: status
          required: false
          in: query
          schema:
            type: string
        - name: category
          required: false
          in: query
          schema:
            type: string
        - name: search
          required: false
          in: query
          schema:
            type: string
        - name: X-API-Version
          in: header
          required: false
          description: API version for header-based versioning
          schema:
            type: string
            enum:
              - 1
              - 2
            default: 1
      responses:
        200:
          description: Blog posts fetched successfully
        401:
          description: Unauthorized - Invalid or missing JWT token.
          content:
            application/json:
              schema:
                example:
                  status: error
                  statusCode: 401
                  message: Unauthorized
                  timestamp: 2026-01-31T19:20:00.000Z
                  path: /api/v1/blog/admin
      security:
        - bearer:
      summary: Get all blog posts (admin)
      tags:
        - blog
  /api/v1/blog/published:
    get:
      operationId: findPublished
      parameters:
        - name: page
          required: false
          in: query
          schema:
            type: number
        - name: limit
          required: false
          in: query
          schema:
            type: number
        - name: category
          required: false
          in: query
          schema:
            type: string
        - name: search
          required: false
          in: query
          schema:
            type: string
        - name: X-API-Version
          in: header
          required: false
          description: API version for header-based versioning
          schema:
            type: string
            enum:
              - 1
              - 2
            default: 1
      responses:
        200:
          description: Published blog posts fetched successfully
      summary: Get published blog posts (public)
      tags:
        - blog
  /api/v1/blog/slug/{slug}:
    get:
      operationId: findBySlug
      parameters:
        - name: slug
          required: true
          in: path
          schema:
            type: string
        - name: X-API-Version
          in: header
          required: false
          description: API version for header-based versioning
          schema:
            type: string
            enum:
              - 1
              - 2
            default: 1
      responses:
        200:
          description: Blog post fetched successfully
        404:
          description: Not Found - Blog post not found.
          content:
            application/json:
              schema:
                example:
                  status: error
                  statusCode: 404
                  message: Blog post not found
                  timestamp: 2026-01-31T19:20:00.000Z
                  path: /api/v1/blog/slug/:slug
      summary: Get blog post by slug (public)
      tags:
        - blog
  /api/v1/blog/statistics:
    get:
      operationId: getStatistics
      parameters:
        - name: X-API-Version
          in: header
          required: false
          description: API version for header-based versioning
          schema:
            type: string
            enum:
              - 1
              - 2
            default: 1
      responses:
        200:
          description: Blog statistics fetched successfully
        401:
          description: Unauthorized - Invalid or missing JWT token.
          content:
            application/json:
              schema:
                example:
                  status: error
                  statusCode: 401
                  message: Unauthorized
                  timestamp: 2026-01-31T19:20:00.000Z
                  path: /api/v1/blog/statistics
      security:
        - bearer:
      summary: Get blog statistics
      tags:
        - blog
  /api/v1/blog/categories:
    get:
      operationId: getCategories
      parameters:
        - name: X-API-Version
          in: header
          required: false
          description: API version for header-based versioning
          schema:
            type: string
            enum:
              - 1
              - 2
            default: 1
      responses:
        200:
          description: Categories fetched successfully
      summary: Get all blog categories with post counts
      tags:
        - blog
    post:
      operationId: createCategory
      parameters:
        - name: X-API-Version
          in: header
          required: false
          description: API version for header-based versioning
          schema:
            type: string
            enum:
              - 1
              - 2
            default: 1
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: #/components/schemas/CreateBlogCategoryDto
      responses:
        201:
          description: Category created successfully
        400:
          description: Bad Request - Validation failed.
          content:
            application/json:
              schema:
                example:
                  status: error
                  statusCode: 400
                  message: Validation failed
                  errors:
                    - Field is required
                    - Invalid format
                  timestamp: 2026-01-31T19:20:00.000Z
                  path: /api/v1/blog/categories
        401:
          description: Unauthorized - Invalid or missing JWT token.
          content:
            application/json:
              schema:
                example:
                  status: error
                  statusCode: 401
                  message: Unauthorized
                  timestamp: 2026-01-31T19:20:00.000Z
                  path: /api/v1/blog/categories
        409:
          description: Conflict - Resource already exists.
          content:
            application/json:
              schema:
                example:
                  status: error
                  statusCode: 409
                  message: Category already exists
                  timestamp: 2026-01-31T19:20:00.000Z
                  path: /api/v1/blog/categories
      security:
        - bearer:
      summary: Create new blog category with SEO fields
      tags:
        - blog
  /api/v1/blog/categories/{id}:
    get:
      operationId: getCategoryById
      parameters:
        - name: id
          required: true
          in: path
          schema:
            type: string
        - name: X-API-Version
          in: header
          required: false
          description: API version for header-based versioning
          schema:
            type: string
            enum:
              - 1
              - 2
            default: 1
      responses:
        200:
          description: Category fetched successfully
        404:
          description: Not Found - Category not found.
          content:
            application/json:
              schema:
                example:
                  status: error
                  statusCode: 404
                  message: Category not found
                  timestamp: 2026-01-31T19:20:00.000Z
                  path: /api/v1/blog/categories/:id
      summary: Get blog category by ID
      tags:
        - blog
    patch:
      operationId: updateCategory
      parameters:
        - name: id
          required: true
          in: path
          schema:
            type: string
        - name: X-API-Version
          in: header
          required: false
          description: API version for header-based versioning
          schema:
            type: string
            enum:
              - 1
              - 2
            default: 1
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: #/components/schemas/UpdateBlogCategoryDto
      responses:
        200:
          description: Category updated successfully
        400:
          description: Bad Request - Validation failed.
          content:
            application/json:
              schema:
                example:
                  status: error
                  statusCode: 400
                  message: Validation failed
                  errors:
                    - Field is required
                    - Invalid format
                  timestamp: 2026-01-31T19:20:00.000Z
                  path: /api/v1/blog/categories/:id
        401:
          description: Unauthorized - Invalid or missing JWT token.
          content:
            application/json:
              schema:
                example:
                  status: error
                  statusCode: 401
                  message: Unauthorized
                  timestamp: 2026-01-31T19:20:00.000Z
                  path: /api/v1/blog/categories/:id
        404:
          description: Not Found - Category not found.
          content:
            application/json:
              schema:
                example:
                  status: error
                  statusCode: 404
                  message: Category not found
                  timestamp: 2026-01-31T19:20:00.000Z
                  path: /api/v1/blog/categories/:id
      security:
        - bearer:
      summary: Update blog category
      tags:
        - blog
    delete:
      operationId: deleteCategory
      parameters:
        - name: id
          required: true
          in: path
          schema:
            type: string
        - name: X-API-Version
          in: header
          required: false
          description: API version for header-based versioning
          schema:
            type: string
            enum:
              - 1
              - 2
            default: 1
      responses:
        200:
          description: Category deleted successfully
        401:
          description: Unauthorized - Invalid or missing JWT token.
          content:
            application/json:
              schema:
                example:
                  status: error
                  statusCode: 401
                  message: Unauthorized
                  timestamp: 2026-01-31T19:20:00.000Z
                  path: /api/v1/blog/categories/:id
        404:
          description: Not Found - Category not found.
          content:
            application/json:
              schema:
                example:
                  status: error
                  statusCode: 404
                  message: Category not found
                  timestamp: 2026-01-31T19:20:00.000Z
                  path: /api/v1/blog/categories/:id
      security:
        - bearer:
      summary: Delete blog category
      tags:
        - blog
  /api/v1/blog/tags:
    get:
      operationId: getTags
      parameters:
        - name: X-API-Version
          in: header
          required: false
          description: API version for header-based versioning
          schema:
            type: string
            enum:
              - 1
              - 2
            default: 1
      responses:
        200:
          description: Tags fetched successfully
      summary: Get all blog tags
      tags:
        - blog
  /api/v1/blog/{id}:
    get:
      operationId: findOne
      parameters:
        - name: id
          required: true
          in: path
          schema:
            type: string
        - name: X-API-Version
          in: header
          required: false
          description: API version for header-based versioning
          schema:
            type: string
            enum:
              - 1
              - 2
            default: 1
      responses:
        200:
          description: Blog post fetched successfully
        401:
          description: Unauthorized - Invalid or missing JWT token.
          content:
            application/json:
              schema:
                example:
                  status: error
                  statusCode: 401
                  message: Unauthorized
                  timestamp: 2026-01-31T19:20:00.000Z
                  path: /api/v1/blog/:id
        404:
          description: Not Found - Blog post not found.
          content:
            application/json:
              schema:
                example:
                  status: error
                  statusCode: 404
                  message: Blog post not found
                  timestamp: 2026-01-31T19:20:00.000Z
                  path: /api/v1/blog/:id
      security:
        - bearer:
      summary: Get blog post by ID
      tags:
        - blog
    patch:
      operationId: update
      parameters:
        - name: id
          required: true
          in: path
          schema:
            type: string
        - name: X-API-Version
          in: header
          required: false
          description: API version for header-based versioning
          schema:
            type: string
            enum:
              - 1
              - 2
            default: 1
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: #/components/schemas/UpdateBlogPostDto
      responses:
        200:
          description: Blog post updated successfully
        400:
          description: Bad Request - Validation failed.
          content:
            application/json:
              schema:
                example:
                  status: error
                  statusCode: 400
                  message: Validation failed
                  errors:
                    - Field is required
                    - Invalid format
                  timestamp: 2026-01-31T19:20:00.000Z
                  path: /api/v1/blog/:id
        401:
          description: Unauthorized - Invalid or missing JWT token.
          content:
            application/json:
              schema:
                example:
                  status: error
                  statusCode: 401
                  message: Unauthorized
                  timestamp: 2026-01-31T19:20:00.000Z
                  path: /api/v1/blog/:id
        404:
          description: Not Found - Blog post not found.
          content:
            application/json:
              schema:
                example:
                  status: error
                  statusCode: 404
                  message: Blog post not found
                  timestamp: 2026-01-31T19:20:00.000Z
                  path: /api/v1/blog/:id
      security:
        - bearer:
      summary: Update blog post
      tags:
        - blog
    delete:
      operationId: remove
      parameters:
        - name: id
          required: true
          in: path
          schema:
            type: string
        - name: X-API-Version
          in: header
          required: false
          description: API version for header-based versioning
          schema:
            type: string
            enum:
              - 1
              - 2
            default: 1
      responses:
        200:
          description: Blog post deleted successfully
        401:
          description: Unauthorized - Invalid or missing JWT token.
          content:
            application/json:
              schema:
                example:
                  status: error
                  statusCode: 401
                  message: Unauthorized
                  timestamp: 2026-01-31T19:20:00.000Z
                  path: /api/v1/blog/:id
        404:
          description: Not Found - Blog post not found.
          content:
            application/json:
              schema:
                example:
                  status: error
                  statusCode: 404
                  message: Blog post not found
                  timestamp: 2026-01-31T19:20:00.000Z
                  path: /api/v1/blog/:id
      security:
        - bearer:
      summary: Delete blog post
      tags:
        - blog
info:
  title: Fullstack NNP API
  description: |
    
    # NestJS + Next.js + PostgreSQL Template API
    
    ## Overview
    Production-ready RESTful API with comprehensive authentication, user management, and database features.
    
    ## Features
    -  JWT Authentication (Access + Refresh tokens)
    -  User Management (CRUD operations)
    -  PostgreSQL Database with TypeORM
    -  Email Service (Password reset, verification)
    -  Session Management (Multi-device support)
    -  Security (XSS, SQL injection prevention)
    -  Performance (Query optimization, caching)
    -  Database Migrations & Seeding
    -  API Versioning (URI & Header-based)
    
    ## Authentication
    All protected endpoints require a valid JWT access token in the Authorization header:
    
    ```
    Authorization: Bearer <your-access-token>
    ```
    
    ### Token Lifecycle
    - **Access Token**: 15 minutes expiry
    - **Refresh Token**: 7 days expiry
    - **Refresh Endpoint**: `POST /api/v1/auth/refresh`
    
    ## API Versioning
    This API supports multiple versioning strategies:
    
    ### URI Versioning (Recommended)
    ```
    GET /api/v1/users
    GET /api/v2/users
    ```
    
    ### Header Versioning
    ```
    X-API-Version: 1
    Accept-Version: 1
    ```
    
    ## Deprecation Policy
    Deprecated endpoints include warning headers:
    - `X-API-Deprecated`: Indicates deprecation
    - `X-API-Sunset`: Date when endpoint will be removed
    - `X-API-Alternative`: Suggested alternative endpoint
    
    ## Error Handling
    All errors follow a consistent format:
    ```json
    {
      "status": "error",
      "statusCode": 400,
      "message": "Error description",
      "errors": ["Detailed validation errors"],
      "timestamp": "2026-01-31T20:00:00.000Z",
      "path": "/api/v1/endpoint"
    }
    ```
    
    ## Rate Limiting
    - **Default**: 100 requests per 15 minutes per IP
    - **Authentication**: 5 failed attempts = 15 minute lockout
    
    ## Support
    - **Documentation**: [GitHub Repository](https://github.com/k-kaundal/fullstack-nnp-template)
    - **Issues**: [Report Issues](https://github.com/k-kaundal/fullstack-nnp-template/issues)
        
  version: 1.0.0
  contact:
    name: K K Kaundal
    url: https://github.com/k-kaundal
    email: kk@kaundal.vip
  license:
    name: MIT
    url: https://opensource.org/licenses/MIT
tags:
  - name: health
    description: Health check endpoints
  - name: auth
    description: Authentication & Authorization endpoints
  - name: users
    description: User management endpoints
  - name: sessions
    description: Session management endpoints
servers:
  - url: http://localhost:3001
    description: Local Development
    variables: undefined
  - url: https://your-api.vercel.app
    description: Production
    variables: undefined
components:
  securitySchemes:
    JWT:
      scheme: bearer
      bearerFormat: JWT
      type: http
      name: JWT
      description: Enter your JWT access token
      in: header
    X-API-Key:
      type: apiKey
      in: header
      name: X-API-Key
      description: API Key for external integrations (optional)
  schemas:
    TriggerCleanupDto:
      type: object
      properties:
        hours:
          type: number
          description: Hours threshold for deleting old logs
          example: 24
          default: 24
          minimum: 1
    RegisterDto:
      type: object
      properties:
        email:
          type: string
          example: john.doe@example.com
          description: User email address
        firstName:
          type: string
          example: John
          description: User first name
          minLength: 2
          maxLength: 50
        lastName:
          type: string
          example: Doe
          description: User last name
          minLength: 2
          maxLength: 50
        password:
          type: string
          example: SecurePass123!
          description: User password (min 8 chars, must include uppercase, lowercase, number, and special character)
          minLength: 8
          maxLength: 100
      required:
        - email
        - firstName
        - lastName
        - password
    LoginDto:
      type: object
      properties:
        email:
          type: string
          example: john.doe@example.com
          description: User email address
        password:
          type: string
          example: SecurePass123!
          description: User password
      required:
        - email
        - password
    RefreshTokenDto:
      type: object
      properties:
        refreshToken:
          type: string
          example: eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9...
          description: Valid refresh token
      required:
        - refreshToken
    ForgotPasswordDto:
      type: object
      properties:
        email:
          type: string
          example: john.doe@example.com
          description: User email address for password reset
      required:
        - email
    ResetPasswordDto:
      type: object
      properties:
        token:
          type: string
          example: abc123def456ghi789
          description: Password reset token received via email
        newPassword:
          type: string
          example: NewSecurePass123!
          description: New password (min 8 chars, must include uppercase, lowercase, number, and special character)
          minLength: 8
          maxLength: 100
      required:
        - token
        - newPassword
    VerifyEmailDto:
      type: object
      properties:
        token:
          type: string
          example: abc123def456ghi789
          description: Email verification token received via email
      required:
        - token
    RevokeSessionDto:
      type: object
      properties:
        sessionId:
          type: string
          example: 123e4567-e89b-12d3-a456-426614174000
          description: Session ID to revoke
      required:
        - sessionId
    RevokeOtherSessionsDto:
      type: object
      properties:
        currentSessionId:
          type: string
          example: 123e4567-e89b-12d3-a456-426614174000
          description: Current session ID to keep active (optional)
    CreateUserDto:
      type: object
      properties:
        email:
          type: string
          example: john.doe@example.com
          description: User email address
        firstName:
          type: string
          example: John
          description: User first name
          minLength: 2
          maxLength: 50
        lastName:
          type: string
          example: Doe
          description: User last name
          minLength: 2
          maxLength: 50
        password:
          type: string
          example: SecurePass123!
          description: User password (optional - temporary password generated if not provided)
          minLength: 8
          maxLength: 100
      required:
        - email
        - firstName
        - lastName
    UpdateUserDto:
      type: object
      properties:
        email:
          type: string
          example: john.doe@example.com
          description: User email address
        firstName:
          type: string
          example: John
          description: User first name
          minLength: 2
          maxLength: 50
        lastName:
          type: string
          example: Doe
          description: User last name
          minLength: 2
          maxLength: 50
        password:
          type: string
          example: SecurePass123!
          description: User password (optional - temporary password generated if not provided)
          minLength: 8
          maxLength: 100
        isActive:
          type: boolean
          example: true
          description: User active status
    BulkUserIdsDto:
      type: object
      properties:
        ids:
          example:
            - 550e8400-e29b-41d4-a716-446655440000
            - 550e8400-e29b-41d4-a716-446655440001
          description: Array of user UUIDs
          type: array
          items:
            type: string
      required:
        - ids
    CreateRoleDto:
      type: object
      properties:
        name:
          type: string
          example: Editor
          description: Role name
        description:
          type: string
          example: Can edit content
          description: Role description
        permissionIds:
          example:
            - perm-uuid-1
            - perm-uuid-2
          description: Permission IDs to assign
          type: array
          items:
            type: string
        isSystemRole:
          type: boolean
          example: false
          description: System role (cannot be deleted)
          default: false
      required:
        - name
        - description
    UpdateRoleDto:
      type: object
      properties:
        name:
          type: string
          example: Editor
          description: Role name
        description:
          type: string
          example: Can edit content
          description: Role description
        permissionIds:
          example:
            - perm-uuid-1
            - perm-uuid-2
          description: Permission IDs to assign
          type: array
          items:
            type: string
        isSystemRole:
          type: boolean
          example: false
          description: System role (cannot be deleted)
          default: false
    CreatePermissionDto:
      type: object
      properties:
        name:
          type: string
          example: users:create
          description: Permission name
        description:
          type: string
          example: Can create users
          description: Permission description
        resource:
          type: string
          example: users
          description: Resource name
        action:
          type: string
          example: create
          description: Action name
      required:
        - name
        - description
        - resource
        - action
    AssignRoleDto:
      type: object
      properties:
        roleIds:
          example:
            - role-uuid-1
            - role-uuid-2
          description: Role IDs to assign to user
          type: array
          items:
            type: string
      required:
        - roleIds
    SubscribeNewsletterDto:
      type: object
      properties:
        email:
          type: string
          example: john.doe@example.com
          description: Email address to subscribe
        firstName:
          type: string
          example: John
          description: First name (optional)
        lastName:
          type: string
          example: Doe
          description: Last name (optional)
      required:
        - email
    SendNewsletterDto:
      type: object
      properties:
        subject:
          type: string
          example: Monthly Updates - January 2026
          description: Newsletter subject
        content:
          type: string
          example: <h1>Hello!</h1><p>Here are our latest updates...</p>
          description: Newsletter HTML content
      required:
        - subject
        - content
    TrackVisitorDto:
      type: object
      properties:
        page:
          type: string
          example: /about
          description: Page URL
        referrer:
          type: string
          example: https://google.com
        language:
          type: string
          example: en-US
        screenWidth:
          type: number
          example: 1920
        screenHeight:
          type: number
          example: 1080
        sessionId:
          type: string
          example: session-uuid
        visitDuration:
          type: number
          example: 120
          description: Visit duration in seconds
      required:
        - page
    CreateContactDto:
      type: object
      properties:
        name:
          type: string
          example: John Doe
        email:
          type: string
          example: john@example.com
        phone:
          type: string
          example: +1234567890
        subject:
          type: string
          example: General Inquiry
        message:
          type: string
          example: I would like to know more about your services.
      required:
        - name
        - email
        - subject
        - message
    UpdateContactDto:
      type: object
      properties:
        status:
          type: string
          example: read
          enum:
            - new
            - read
            - replied
            - archived
    CreateBlogPostDto:
      type: object
      properties:
        title:
          type: string
          example: How to Build a Modern Web App
          minLength: 5
          maxLength: 200
        content:
          type: string
          example: <h1>Introduction</h1><p>Content here...</p>
          description: HTML content from rich text editor
        excerpt:
          type: string
          example: Learn how to build modern web applications with React and Node.js
          maxLength: 500
        featuredImage:
          type: string
          example: https://example.com/images/post.jpg
        status:
          type: string
          example: draft
          enum:
            - draft
            - published
            - archived
          default: draft
        metaDescription:
          type: string
          example: Build modern web applications with the latest technologies
          maxLength: 160
        metaKeywords:
          type: string
          example: web development, react, nodejs, tutorial
        tags:
          example:
            - react
            - nodejs
            - tutorial
          type: array
          items:
            type: string
        category:
          type: string
          example: Web Development
      required:
        - title
        - content
        - status
    CreateBlogCategoryDto:
      type: object
      properties:
        name:
          type: string
          example: Technology
          description: Category name
        description:
          type: string
          example: Latest technology news and tutorials
          description: Category description
        image:
          type: string
          example: https://example.com/images/tech.jpg
          description: Category image URL
        metaDescription:
          type: string
          example: Explore the latest in technology
          description: Meta description for SEO
        metaKeywords:
          type: string
          example: technology, tech news, tutorials
          description: Meta keywords for SEO
      required:
        - name
    UpdateBlogCategoryDto:
      type: object
      properties:
        name:
          type: string
          example: Technology
          description: Category name
        description:
          type: string
          example: Latest technology news and tutorials
          description: Category description
        image:
          type: string
          example: https://example.com/images/tech.jpg
          description: Category image URL
        metaDescription:
          type: string
          example: Explore the latest in technology
          description: Meta description for SEO
        metaKeywords:
          type: string
          example: technology, tech news, tutorials
          description: Meta keywords for SEO
    UpdateBlogPostDto:
      type: object
      properties:
        title:
          type: string
          example: How to Build a Modern Web App
          minLength: 5
          maxLength: 200
        content:
          type: string
          example: <h1>Introduction</h1><p>Content here...</p>
          description: HTML content from rich text editor
        excerpt:
          type: string
          example: Learn how to build modern web applications with React and Node.js
          maxLength: 500
        featuredImage:
          type: string
          example: https://example.com/images/post.jpg
        status:
          type: string
          example: draft
          enum:
            - draft
            - published
            - archived
          default: draft
        metaDescription:
          type: string
          example: Build modern web applications with the latest technologies
          maxLength: 160
        metaKeywords:
          type: string
          example: web development, react, nodejs, tutorial
        tags:
          example:
            - react
            - nodejs
            - tutorial
          type: array
          items:
            type: string
        category:
          type: string
          example: Web Development
